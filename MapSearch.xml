<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\..\..\..\..\WoW\Data\Interface\AddOns\Blizzard_SharedXML\UI.xsd">
    <Script file="MapSearch_Templates.lua" />

	<!-- Based on the vanilla 'WorldMapTrackingPinButtonTemplate' -->
	<!-- Found in Interface\AddOns\Blizzard_WorldMapFrame\Blizzard_WorldMapTemplates.xml -->
    <Button name="MapSearchButtonTemplate" frameStrata="HIGH" mixin="MapSearchButtonMixin" virtual="true">
        <Size x="32" y="32" />
        <Layers>
            <Layer level="BACKGROUND" textureSubLevel="-1">
				<Texture atlas="MapCornerShadow-Right" useAtlasSize="true" hidden="true">
					<Anchors>
						<Anchor point="TOPRIGHT" x="4" y="1"/>
					</Anchors>
					<TexCoords left="0" right="1" top="1" bottom="0"/>
				</Texture>
			</Layer>
			<Layer level="BACKGROUND">
				<Texture parentKey="Background" file="Interface\Minimap\UI-Minimap-Background">
					<Size x="25" y="25"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="3" y="-4"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<Texture parentKey="Icon" file="Interface\AddOns\MapSearch\Assets\SearchIcon">
					<Size x="20" y="20"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="7" y="-6"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture parentKey="IconOverlay" hidden="true">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.Icon"/>
						<Anchor point="BOTTOMRIGHT" relativeKey="$parent.Icon"/>
					</Anchors>
					<Color r="0.0" g="0.0" b="0.0" a="0.3"/>
				</Texture>
			</Layer>
			<Layer level="OVERLAY" textureSubLevel="1">
				<Texture parentKey="Border" file="Interface\Minimap\MiniMap-TrackingBorder">
					<Size x="54" y="54"/>
					<Anchors>
						<Anchor point="TOPLEFT"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY" textureSubLevel="2">
				<Texture parentKey="ActiveTexture" file="Interface\Minimap\UI-Minimap-ZoomButton-Toggle" alphaMode="ADD" hidden="true">
					<Size x="37" y="37"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.Border" x="-2" y="1"/>
					</Anchors>					
				</Texture>
			</Layer>
        </Layers>
        <HighlightTexture alphaMode="ADD" file="Interface\Minimap\UI-Minimap-ZoomButton-Highlight" />
        <Scripts>
            <OnClick method="OnClick" />
            <OnEnter method="OnEnter" />
            <OnLeave function="GameTooltip_Hide" />
			<OnMouseDown method="OnMouseDown" />
			<OnMouseUp method="OnMouseUp" />
        </Scripts>
    </Button>

	<Frame name="MapSearchSettingsFrame" frameStrata="HIGH" virtual="true" inherits="DialogBorderDarkTemplate">
		<Frames>
			<Button name="MapSearchSettings_SortId" text="Sort by ID" virtual="true" inherits="UIPanelButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent" x="16" y="-68" />
					<Anchor point="TOPRIGHT" relativeKey="$parent" x="-16" y="-68" />
				</Anchors>
				<Scripts>
					<OnClick>
						MapSearchSettings["sort"] = 0
						self:Disable()
						MapSearchSettings_SortName:Enable()
					</OnClick>
				</Scripts>
			</Button>

			<Button name="MapSearchSettings_SortName" text="Sort by Name" virtual="true" inherits="UIPanelButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent" x="16" y="-92" />
					<Anchor point="TOPRIGHT" relativeKey="$parent" x="-16" y="-92" />
				</Anchors>
				<Scripts>
					<OnClick>
						MapSearchSettings["sort"] = 1
						self:Disable()
						MapSearchSettings_SortId:Enable()
					</OnClick>
				</Scripts>
			</Button>

			<Button name="MapSearchSettingsClose" text="Close" virtual="true" inherits="UIPanelButtonTemplate">
				<Anchors>
					<Anchor point="BOTTOMLEFT" relativeKey="$parent" x="16" y="12" />
					<Anchor point="BOTTOMRIGHT" relativeKey="$parent" x="-16" y="12" />
				</Anchors>

				<Scripts>
					<OnClick>
						self:GetParent():Hide()
					</OnClick>
				</Scripts>
			</Button>
		</Frames>

		<Layers>
			<Layer level="OVERLAY">
				<FontString text="MapSearch Settings" inherits="GameFontNormal" justifyH="CENTER">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent" y="-12" />
						<Anchor point="TOPRIGHT" relativeKey="$parent" y="-12" />
					</Anchors>
				</FontString>
			</Layer>

			<Layer level="OVERLAY">
				<FontString text="Sort" inherits="GameFontNormal" justifyH="LEFT">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent" x="16" y="-34" />
						<Anchor point="TOPRIGHT" relativeKey="$parent" x="16" y="-34" />
					</Anchors>
				</FontString>
			</Layer>

			<Layer level="OVERLAY">
				<FontString text="Filter" inherits="GameFontNormal" justifyH="LEFT">
					<Anchors>
						<Anchor point="CENTER" />
						<Anchor point="TOPLEFT" relativeKey="$parent" x="16" y="-122" />
						<Anchor point="TOPRIGHT" relativeKey="$parent" x="16" y="-122" />
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
	</Frame>
</Ui>